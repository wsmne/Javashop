(function(){"use strict";var t={7919:function(t,e,r){var n=r(6369),i=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},s=[],o=r(1001),a={},u=(0,o.Z)(a,i,s,!1,null,null,null),d=u.exports,c=r(2631),l=function(){var t=this,e=t._self._c;return e("div",[e("nav",[e("label",[t._v("Buy")]),t._v(" | "),e("router-link",{attrs:{to:"/"}},[t._v("登录")]),t._v(" | "),e("router-link",{attrs:{to:"/"}},[t._v("注销")]),t._v(" | "),e("label",[t._v("Admin")])],1),t._m(0),e("section",{staticClass:"flex-container"},[e("div",{staticClass:"product-list"},[e("h2",[t._v("商品列表")]),e("table",[t._m(1),e("tbody",t._l(t.products,(function(r){return e("tr",{key:r.id},[e("td",[t._v(t._s(r.id))]),e("td",[t._v(t._s(r.name))]),e("td",[t._v(t._s(r.description))]),e("td",[t._v(t._s(r.price))]),e("td",[t._v(t._s(r.inventory))]),e("td",[e("div",[e("input",{directives:[{name:"model",rawName:"v-model",value:r.quantity,expression:"product.quantity"}],staticStyle:{width:"80px"},attrs:{type:"number",min:"1",max:r.inventory},domProps:{value:r.quantity},on:{input:function(e){e.target.composing||t.$set(r,"quantity",e.target.value)}}})])]),e("td",[e("button",{on:{click:function(e){return t.addToCart(r)}}},[t._v("加入购物车")])])])})),0)])]),e("div",{staticClass:"shopping-cart"},[e("h2",[t._v("购物车 UserId:"+t._s(this.order.uid))]),e("table",[t._m(2),e("tbody",t._l(t.cart,(function(r){return e("tr",{key:r.id},[e("td",[t._v(t._s(r.pid))]),e("td",[t._v(t._s(r.price))]),e("td",[t._v(t._s(r.quantity))]),e("td",[t._v(t._s(r.quantity*r.price))]),e("td",[e("button",{on:{click:function(e){return t.del(r)}}},[t._v("删除")]),t._v("| "),e("button",{on:{click:function(e){return t.checkout(r)}}},[t._v("结算")])])])})),0)])])])])},v=[function(){var t=this,e=t._self._c;return e("header",[e("h1",[t._v("电商网站")])])},function(){var t=this,e=t._self._c;return e("thead",[e("tr",[e("th",[t._v("商品编号")]),e("th",[t._v("商品名称")]),e("th",[t._v("商品描述")]),e("th",[t._v("价格")]),e("th",[t._v("库存")]),e("th",[t._v("选择数量")]),e("th",[t._v("操作")])])])},function(){var t=this,e=t._self._c;return e("thead",[e("tr",[e("th",[t._v("商品编号")]),e("th",[t._v("价格")]),e("th",[t._v("数量")]),e("th",[t._v("总价格")]),e("th",[t._v("操作")])])])}],p=r(7909),h={data(){return{products:[],cart:[],order:{uid:null,pid:null,quantity:null,price:null},uuu:null}},created(){this.$eventBus.$on("updateLoginUserId",(t=>{this.order.uid=t,this.fetchCart()}))},mounted(){this.fetchProducts()},methods:{addToCart(t){this.order.quantity=parseInt(t.quantity),this.order.quantity>0&&this.order.quantity<t.inventory&&0!=this.order.uid&&(this.order.pid=t.id,p.Z.post("http://47.113.199.228:8080/carts",this.order),this.order.pid=null,this.order.quantity=null,t.quantity=null,setTimeout((()=>{this.fetchCart()}),50))},del(t){const e=this.order.uid,r=t.pid;p.Z.delete("http://47.113.199.228:8080/carts",{data:{uid:e,pid:r}}).then((e=>{console.log(e.data),this.cart=this.cart.filter((e=>e.pid!==t.pid))}))},checkout(t){const e=this.order.uid,r=t.pid,n=t.quantity;p.Z.put("http://47.113.199.228:8080/carts",{uid:e,pid:r,quantity:n,price:t.price}).then((t=>{console.log("Order submitted successfully:",t.data),setTimeout((()=>{this.fetchProducts(),this.fetchCart()}),100)}))},fetchProducts(){p.Z.get("http://47.113.199.228:8080/goods").then((t=>{this.products=t.data.data}))},fetchCart(){p.Z.get(`http://47.113.199.228:8080/carts/${this.order.uid}`).then((t=>{this.cart=t.data.data}))}}},m=h,_=(0,o.Z)(m,l,v,!1,null,null,null),f=_.exports,y=function(){var t=this,e=t._self._c;return e("div",[e("nav",[e("label",[t._v("Buy")]),t._v(" | "),e("router-link",{attrs:{to:"/"}},[t._v("登录")]),t._v(" | "),e("router-link",{attrs:{to:"/"}},[t._v("注销")]),t._v(" | "),e("label",[t._v("Admin")])],1),e("h1",[t._v("登录")]),e("body",{attrs:{id:"k"}},[e("form",{on:{submit:function(e){return e.preventDefault(),t.login.apply(null,arguments)}}},[e("h2",[t._v("欢迎登录")]),e("label",{attrs:{for:"username"}},[t._v("用户名:")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.username,expression:"username"}],attrs:{type:"text",id:"username",name:"username",required:""},domProps:{value:t.username},on:{input:function(e){e.target.composing||(t.username=e.target.value)}}}),e("label",{attrs:{for:"password"}},[t._v("密码:")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],attrs:{type:"password",id:"password",name:"password",required:""},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}}),e("div",{staticStyle:{"align-items":"center",display:"flex","justify-content":"center"}},[e("button",{attrs:{type:"button"},on:{click:t.signup}},[t._v("注册")]),e("button",{attrs:{type:"submit"},on:{click:t.login}},[t._v("登录")])])]),t.errorMessage?e("p",{staticStyle:{color:"red"}},[t._v(t._s(t.errorMessage))]):t._e()])])},g=[],b=(r(560),{data(){return{username:"",password:"",errorMessage:""}},methods:{signup(){if(""===this.username)return this.clearForm(),void alert("用户名不可为空");""!==this.password?p.Z.post("http://47.113.199.228:8080/login",{username:this.username,password:this.password}).then((t=>{1==t.data.code?alert("注册失败:用户名重复"):(p.Z.post("http://47.113.199.228:8080/users",{username:this.username,password:this.password}),alert("注册成功")),this.clearForm()})):alert("密码不可为空")},login(){if(""===this.username)return this.clearForm(),void alert("用户名不可为空");p.Z.post("http://47.113.199.228:8080/login",{username:this.username,password:this.password}).then((t=>{1==t.data.code?0==t.data.data.type?(this.$eventBus.$emit("updateLoginUserId",t.data.data.id),"/buy"!==this.$route.path&&this.$router.push("/buy")):1===t.data.data.type&&"/admin"!==this.$route.path&&this.$router.push("/admin"):(this.errorMessage=t.data.message,alert("登录失败:用户名或密码错误"),this.clearForm())}))},clearForm(){this.username="",this.password=""}}}),w=b,P=(0,o.Z)(w,y,g,!1,null,null,null),k=P.exports,x=function(){var t=this,e=t._self._c;return e("div",[e("nav",[e("label",[t._v("Buy")]),t._v(" | "),e("router-link",{attrs:{to:"/"}},[t._v("登录")]),t._v(" | "),e("router-link",{attrs:{to:"/"}},[t._v("注销")]),t._v(" | "),e("label",[t._v("Admin")])],1),e("header",[e("h1",[t._v("电商系统管理")]),e("div",{staticClass:"management-buttons"},[e("button",{on:{click:function(e){return t.switchView("products")}}},[t._v("商品管理")]),e("button",{on:{click:function(e){return t.switchView("users")}}},[t._v("用户管理")]),e("button",{on:{click:function(e){return t.switchView("orders")}}},[t._v("成交单")])])]),e("div",{staticClass:"maxi-container"},[e("div",{directives:[{name:"show",rawName:"v-show",value:"products"===t.currentView,expression:"currentView === 'products'"}],staticClass:"main-container"},[e("div",{staticClass:"products-list"},[e("div",{staticStyle:{display:"flex","align-items":"center"}},[e("label",{staticStyle:{width:"120px"},attrs:{for:"search"}},[t._v("查询:")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.searchQuery,expression:"searchQuery"}],attrs:{type:"text",placeholder:"为空则查询全部"},domProps:{value:t.searchQuery},on:{input:function(e){e.target.composing||(t.searchQuery=e.target.value)}}}),e("button",{staticStyle:{width:"120px"},on:{click:t.searchGoods}},[t._v("查询")])]),e("table",[t._m(0),e("tbody",t._l(t.products,(function(r){return e("tr",{key:r.id},[e("td",[t._v(t._s(r.id))]),e("td",[t._v(t._s(r.name))]),e("td",[t._v(t._s(r.kind))]),e("td",[t._v(t._s(r.description))]),e("td",[t._v(t._s(r.price))]),e("td",[t._v(t._s(r.inventory))]),e("td",[e("button",{on:{click:function(e){return t.editId(r.id)}}},[t._v("编辑")]),t._v("|"),e("button",{on:{click:function(e){return t.deleteItem(r.id)}}},[t._v("删除")])])])})),0)])]),e("div",{staticClass:"add-product-form"},[e("label",[t._v("操作商品")]),e("div",[e("div",[e("form",{attrs:{id:"aa"}},[e("label",{attrs:{for:"name"}},[t._v("Name:")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.Product.name,expression:"Product.name"}],attrs:{type:"text",required:""},domProps:{value:t.Product.name},on:{input:function(e){e.target.composing||t.$set(t.Product,"name",e.target.value)}}}),e("label",{attrs:{for:"kind"}},[t._v("Kind:")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.Product.kind,expression:"Product.kind"}],attrs:{type:"text",required:""},domProps:{value:t.Product.kind},on:{input:function(e){e.target.composing||t.$set(t.Product,"kind",e.target.value)}}}),e("label",{attrs:{for:"description"}},[t._v("Description:")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.Product.description,expression:"Product.description"}],attrs:{type:"text",required:""},domProps:{value:t.Product.description},on:{input:function(e){e.target.composing||t.$set(t.Product,"description",e.target.value)}}}),e("label",{attrs:{for:"price"}},[t._v("Price:")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.Product.price,expression:"Product.price"}],attrs:{type:"number",required:""},domProps:{value:t.Product.price},on:{input:function(e){e.target.composing||t.$set(t.Product,"price",e.target.value)}}}),e("label",{attrs:{for:"inventory"}},[t._v("Inventory:")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.Product.inventory,expression:"Product.inventory"}],attrs:{type:"number",required:""},domProps:{value:t.Product.inventory},on:{input:function(e){e.target.composing||t.$set(t.Product,"inventory",e.target.value)}}}),e("div",{staticClass:"form-row"},[e("label",{attrs:{for:"id"}},[t._v("id(仅作修改使用，选择左侧编辑按钮，输入信息后自动添加)")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.Product.id,expression:"Product.id"}],attrs:{type:"text",required:"",readonly:""},domProps:{value:t.Product.id},on:{input:function(e){e.target.composing||t.$set(t.Product,"id",e.target.value)}}}),e("button",{attrs:{type:"button"},on:{click:function(e){return t.clearForm()}}},[t._v("清空")]),e("button",{attrs:{type:"button",disabled:!t.Product.id},on:{click:function(e){return t.editItem()}}},[t._v("修改")]),e("button",{attrs:{type:"submit",disabled:!t.isValidForm()},on:{click:function(e){return t.addItem()}}},[t._v("增加")])])])])])])]),e("div",{directives:[{name:"show",rawName:"v-show",value:"users"===t.currentView,expression:"currentView === 'users'"}]},[e("div",{staticClass:"users-list"},[e("div",{staticStyle:{display:"flex","align-items":"center"}},[e("label",{staticStyle:{width:"170px"},attrs:{for:"search"}},[t._v("按用户名搜索:")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.searchQuery2,expression:"searchQuery2"}],attrs:{type:"text",placeholder:"为空则查询全部"},domProps:{value:t.searchQuery2},on:{input:function(e){e.target.composing||(t.searchQuery2=e.target.value)}}}),e("button",{staticStyle:{width:"120px"},on:{click:t.searchUser}},[t._v("查询")])]),e("table",[t._m(1),e("tbody",t._l(t.users,(function(r){return e("tr",{key:r.id},[e("td",[t._v(t._s(r.id))]),e("td",[t._v(t._s(r.username))]),e("td",[t._v(t._s(r.password))]),e("td",[t._v(t._s(1===r.type?"管理员":"普通用户"))]),e("td",[e("button",{on:{click:function(e){return t.deleteUserById(r.id)}}},[t._v("删除")])])])})),0)])])]),e("div",{directives:[{name:"show",rawName:"v-show",value:"orders"===t.currentView,expression:"currentView === 'orders'"}],staticClass:"main-container"},[e("div",{staticClass:"products-list"},[e("table",[t._m(2),e("tbody",t._l(t.orders,(function(r){return e("tr",{key:r.uid},[e("td",[t._v(t._s(r.uid))]),e("td",[t._v(t._s(r.pid))]),e("td",[t._v(t._s(r.price))]),e("td",[t._v(t._s(r.quantity))]),e("td",[t._v(t._s(r.quantity*r.price))])])})),0)])])])])])},Z=[function(){var t=this,e=t._self._c;return e("thead",[e("tr",[e("th",[t._v("ID")]),e("th",[t._v("商品名称")]),e("th",[t._v("分类")]),e("th",[t._v("描述")]),e("th",[t._v("价格")]),e("th",[t._v("库存")]),e("th",[t._v("操作")])])])},function(){var t=this,e=t._self._c;return e("thead",[e("tr",[e("th",[t._v("ID")]),e("th",[t._v("用户名")]),e("th",[t._v("密码")]),e("th",[t._v("身份")]),e("th",[t._v("操作")])])])},function(){var t=this,e=t._self._c;return e("thead",[e("tr",[e("th",[t._v("用户ID")]),e("th",[t._v("商品ID")]),e("th",[t._v("单价")]),e("th",[t._v("数量")]),e("th",[t._v("总价")])])])}],q={data(){return{products:[],users:[],orders:[],Product:{name:"",kind:"",description:"",price:null,inventory:null},searchQuery:"",searchQuery2:"",currentView:"products"}},mounted(){this.fetchGoodsData(),this.fetchUsersData(),this.fetchOrdersData()},methods:{switchView(t){this.currentView=t},fetchGoodsData(){p.Z.get("http://47.113.199.228:8080/goods").then((t=>{this.products=t.data.data}))},fetchUsersData(){p.Z.get("http://47.113.199.228:8080/users").then((t=>{this.users=t.data.data}))},fetchOrdersData(){p.Z.get("http://47.113.199.228:8080/deals").then((t=>{this.orders=t.data.data}))},editItem(t){console.log("编辑操作，产品信息:",t),p.Z.put("http://47.113.199.228:8080/goods",this.Product).then((t=>{console.log("Form submitted successfully:",t.data),this.fetchGoodsData(),this.Product={name:"",kind:"",description:"",price:null,inventory:null}}))},clearForm(){this.Product={name:"",kind:"",description:"",price:null,inventory:null}},deleteItem(t){confirm("确定要删除吗？")&&p.Z.delete(`http://47.113.199.228:8080/${t}`).then((e=>{console.log(e.data),this.products=this.products.filter((e=>e.id!==t))})).catch((t=>{console.error(t)}))},deleteUserById(t){confirm("确定要删除吗？")&&p.Z.delete(`http://47.113.199.228:8080/users/${t}`).then((e=>{console.log(e.data),this.users=this.users.filter((e=>e.id!==t))}))},addItem(){p.Z.post("http://47.113.199.228:8080/goods",this.Product).then((t=>{console.log("Form submitted successfully:",t.data),this.fetchGoodsData(),this.Product={name:"",kind:"",description:"",price:null,inventory:null}}))},isValidForm(){return""!==this.Product.name&&""!==this.Product.kind&&""!==this.Product.description&&null!==this.Product.price&&null!==this.Product.inventory},editId(t){this.Product.id=t},searchGoods(){if(""==this.searchQuery)this.fetchGoodsData();else{const t=this.searchQuery;p.Z.get(`http://47.113.199.228:8080/${t}`).then((t=>{this.products=t.data.data}))}},searchUser(){if(""==this.searchQuery2)this.fetchUsersData();else{const t=this.searchQuery2;p.Z.get(`http://47.113.199.228:8080/users/${t}`).then((t=>{this.users=t.data.data}))}}}},I=q,$=(0,o.Z)(I,x,Z,!1,null,"be1c6ee2",null),C=$.exports;n.ZP.use(c.ZP);const D=[{path:"/",name:"login",component:k},{path:"/buy",name:"/buy",component:f},{path:"/admin",name:"admin",component:C}],O=new c.ZP({routes:D});var U=O,N=r(4442);n.ZP.use(N.ZP);var S=new N.ZP.Store({state:{loginUserId:null},mutations:{updateLoginUserId(t,e){t.loginUserId=e}},actions:{setLoginUserId({commit:t},e){t("updateLoginUserId",e)}}});n.ZP.prototype.$eventBus=new n.ZP,n.ZP.prototype.$LoginUserId=0,n.ZP.config.productionTip=!1,new n.ZP({router:U,render:t=>t(d),store:S}).$mount("#app")}},e={};function r(n){var i=e[n];if(void 0!==i)return i.exports;var s=e[n]={exports:{}};return t[n].call(s.exports,s,s.exports,r),s.exports}r.m=t,function(){var t=[];r.O=function(e,n,i,s){if(!n){var o=1/0;for(c=0;c<t.length;c++){n=t[c][0],i=t[c][1],s=t[c][2];for(var a=!0,u=0;u<n.length;u++)(!1&s||o>=s)&&Object.keys(r.O).every((function(t){return r.O[t](n[u])}))?n.splice(u--,1):(a=!1,s<o&&(o=s));if(a){t.splice(c--,1);var d=i();void 0!==d&&(e=d)}}return e}s=s||0;for(var c=t.length;c>0&&t[c-1][2]>s;c--)t[c]=t[c-1];t[c]=[n,i,s]}}(),function(){r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,{a:e}),e}}(),function(){r.d=function(t,e){for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})}}(),function(){r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){var t={143:0};r.O.j=function(e){return 0===t[e]};var e=function(e,n){var i,s,o=n[0],a=n[1],u=n[2],d=0;if(o.some((function(e){return 0!==t[e]}))){for(i in a)r.o(a,i)&&(r.m[i]=a[i]);if(u)var c=u(r)}for(e&&e(n);d<o.length;d++)s=o[d],r.o(t,s)&&t[s]&&t[s][0](),t[s]=0;return r.O(c)},n=self["webpackChunkshopping"]=self["webpackChunkshopping"]||[];n.forEach(e.bind(null,0)),n.push=e.bind(null,n.push.bind(n))}();var n=r.O(void 0,[998],(function(){return r(7919)}));n=r.O(n)})();
//# sourceMappingURL=app.a508b7c3.js.map